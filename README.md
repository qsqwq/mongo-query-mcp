# MongoDBè‡ªç„¶è¯­è¨€æŸ¥è¯¢MCPæœåŠ¡å™¨

ä¸€ä¸ªå¼ºå¤§çš„MCPæœåŠ¡å™¨ï¼Œæ”¯æŒä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢MongoDBæ•°æ®åº“ï¼Œä¸“é—¨ä¸ºç”Ÿç‰©å…¥ä¾µç ”ç©¶ç­‰å­¦æœ¯é¢†åŸŸè®¾è®¡ã€‚é›†æˆå‘é‡ç›¸ä¼¼åº¦æœç´¢ã€AIç»“æžœé‡æŽ’åºå’Œæ™ºèƒ½åˆ†æžåŠŸèƒ½ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.8+-green.svg)
![MCP](https://img.shields.io/badge/MCP-1.0.0-orange.svg)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ðŸ” **è‡ªç„¶è¯­è¨€æŸ¥è¯¢**: å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºå‘é‡è¿›è¡Œæ™ºèƒ½æœç´¢
- ðŸ“Š **å‘é‡ç›¸ä¼¼åº¦æœç´¢**: åŸºäºŽä½™å¼¦ç›¸ä¼¼åº¦çš„ç²¾å‡†æ–‡æ¡£æ£€ç´¢
- ðŸŽ¯ **AIé‡æŽ’åº**: ä½¿ç”¨Qwen3-Rerankeræ¨¡åž‹ä¼˜åŒ–æœç´¢ç»“æžœ
- ðŸ¤– **æ™ºèƒ½åˆ†æž**: DeepSeek APIé©±åŠ¨çš„ä¸“ä¸šåˆ†æžæŠ¥å‘Š
- ðŸŒ **ä¸­æ–‡ä¼˜åŒ–**: ä¸“ä¸ºä¸­æ–‡å­¦æœ¯æ–‡çŒ®è®¾è®¡ä¼˜åŒ–
- ðŸ“¦ **å³æ’å³ç”¨**: æ ‡å‡†MCPåè®®ï¼Œå…¼å®¹æ‰€æœ‰MCPå®¢æˆ·ç«¯

## ðŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Python 3.8+
- MongoDB 4.4+
- Ollama (æœ¬åœ°æ¨¡åž‹æŽ¨ç†)

### å®‰è£…æ­¥éª¤

1. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

2. **é…ç½®MongoDB**
   ```bash
   # å¯åŠ¨MongoDBæœåŠ¡
   mongod
   ```

3. **å®‰è£…Ollamaå¹¶ä¸‹è½½æ¨¡åž‹**
   ```bash
   # å®‰è£…Ollama
   curl -fsSL https://ollama.ai/install.sh | sh
   
   # ä¸‹è½½åµŒå…¥æ¨¡åž‹
   ollama pull dengcao/Qwen3-Embedding-8B:Q5_K_M
   ```

4. **åˆ›å»ºçŽ¯å¢ƒé…ç½®**
   ```bash
   # åˆ›å»º .env æ–‡ä»¶
   cat > .env << EOF
   MONGO_URI=mongodb://localhost:27017/
   MONGO_DB_NAME=your_database_name
   MONGO_COLLECTION=your_collection_name
   
   # å¯é€‰ï¼šAIå¢žå¼ºåŠŸèƒ½
   DEEPSEEK_API_KEY=your_api_key
   DEEPSEEK_API_URL=https://api.deepseek.com/chat/completions
   EOF
   ```

### MCPå®¢æˆ·ç«¯é…ç½®

#### Cursoré…ç½®
```json
{
  "mcpServers": {
    "mongo-query-server": {
      "command": "python",
      "args": ["start_mcp_server.py"],
      "env": {
        "PYTHONPATH": "."
      }
    }
  }
}
```

#### Claude Desktopé…ç½®
```json
{
  "mcpServers": {
    "mongo-query-server": {
      "command": "python",
      "args": ["/path/to/start_mcp_server.py"],
      "env": {
        "PYTHONPATH": "/path/to/project"
      }
    }
  }
}
```

## ðŸ› ï¸ å¯ç”¨å·¥å…·

### query_mongo_with_natural_language
ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢MongoDBæ•°æ®åº“

**å‚æ•°:**
- `query_text` (å¿…éœ€): è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ–‡æœ¬
- `db_name` (å¯é€‰): æ•°æ®åº“åç§°
- `collection_name` (å¯é€‰): é›†åˆåç§°  
- `limit` (å¯é€‰): è¿”å›žç»“æžœæ•°é‡ï¼Œé»˜è®¤5
- `use_reranker` (å¯é€‰): æ˜¯å¦ä½¿ç”¨é‡æŽ’åºï¼Œé»˜è®¤true
- `enhance_results` (å¯é€‰): æ˜¯å¦AIå¢žå¼ºï¼Œé»˜è®¤true

**ç¤ºä¾‹:**
```
æŸ¥è¯¢ï¼šå¤–æ¥ç‰©ç§å…¥ä¾µå¯¹ç”Ÿæ€ç³»ç»Ÿçš„å½±å“
```

### text_to_vector
å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º

**å‚æ•°:**
- `text` (å¿…éœ€): è¦è½¬æ¢çš„æ–‡æœ¬

**ç¤ºä¾‹:**
```
æ–‡æœ¬ï¼šç”Ÿç‰©å…¥ä¾µç›‘æµ‹æŠ€æœ¯
```

### get_database_info
èŽ·å–æ•°æ®åº“å’Œé›†åˆä¿¡æ¯

**å‚æ•°:** æ— 

## ðŸ“Š ä½¿ç”¨åœºæ™¯

### å­¦æœ¯ç ”ç©¶
- æ–‡çŒ®æ£€ç´¢å’Œç›¸ä¼¼è®ºæ–‡æŽ¨è
- ç ”ç©¶è¶‹åŠ¿åˆ†æž
- çŸ¥è¯†å›¾è°±æž„å»º

### æ”¿ç­–åˆ†æž
- æ³•è§„æ–‡æ¡£æ™ºèƒ½æœç´¢
- æ”¿ç­–å…³è”æ€§åˆ†æž
- å½±å“è¯„ä¼°æŠ¥å‘Š

### æ•°æ®æŒ–æŽ˜
- å¤§è§„æ¨¡æ–‡æ¡£é›†åˆåˆ†æž
- å†…å®¹ç›¸ä¼¼åº¦è®¡ç®—
- æ™ºèƒ½åˆ†ç±»å’Œæ ‡æ³¨

## ðŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ¨¡åž‹
```python
# åœ¨ä»£ç ä¸­ä¿®æ”¹æ¨¡åž‹é…ç½®
LOCAL_EMBEDDING_MODEL = 'your-custom-model'
```

### æ€§èƒ½ä¼˜åŒ–
- GPUåŠ é€ŸæŽ¨ç†
- æ‰¹é‡å¤„ç†ä¼˜åŒ–
- å†…å­˜ä½¿ç”¨æŽ§åˆ¶

### æ•°æ®å¯¼å…¥
æ”¯æŒæ‰¹é‡å¯¼å…¥.npyå‘é‡æ–‡ä»¶ï¼š
```bash
python å‘é‡è¾“å…¥æ•°æ®åº“_æ‰¹é‡ç‰ˆ.py /path/to/data
```

## ðŸ“ˆ æ€§èƒ½ç‰¹æ€§

- **å‘é‡ç»´åº¦**: æ”¯æŒä»»æ„ç»´åº¦åµŒå…¥å‘é‡
- **æŸ¥è¯¢é€Ÿåº¦**: å¹³å‡å“åº”æ—¶é—´ < 2ç§’
- **å¹¶å‘æ”¯æŒ**: å¤šå®¢æˆ·ç«¯åŒæ—¶è®¿é—®
- **å†…å­˜ä¼˜åŒ–**: FP16æŽ¨ç†é™ä½Žå†…å­˜ä½¿ç”¨
- **é”™è¯¯æ¢å¤**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

## ðŸŒŸ ç‰¹è‰²åŠŸèƒ½

### æ™ºèƒ½é‡æŽ’åº
ä½¿ç”¨Qwen3-Reranker-4Bæ¨¡åž‹å¯¹æœç´¢ç»“æžœè¿›è¡ŒäºŒæ¬¡æŽ’åºï¼Œæé«˜ç›¸å…³æ€§ã€‚

### AIåˆ†æžæŠ¥å‘Š
é›†æˆDeepSeek APIï¼Œè‡ªåŠ¨ç”Ÿæˆä¸“ä¸šçš„åˆ†æžæŠ¥å‘Šï¼š
- å…³é”®ä¿¡æ¯æå–
- å†…å®¹æ·±åº¦åˆ†æž  
- ä¸“ä¸šè§è§£æ€»ç»“
- ç»“æž„åŒ–è¾“å‡º

### ä¸­æ–‡ä¼˜åŒ–
ä¸“é—¨é’ˆå¯¹ä¸­æ–‡å­¦æœ¯æ–‡çŒ®è¿›è¡Œä¼˜åŒ–ï¼š
- ä¸­æ–‡åˆ†è¯å¤„ç†
- å­¦æœ¯æœ¯è¯­è¯†åˆ«
- è¯­ä¹‰ç†è§£å¢žå¼º

## ðŸ” ç¤ºä¾‹æŸ¥è¯¢

```
ç”¨æˆ·ï¼šä½¿ç”¨mongo-query-serveræŸ¥è¯¢"å…¥ä¾µç‰©ç§å¯¹å†œä¸šçš„å½±å“"

ç»“æžœï¼š
æŸ¥è¯¢: å…¥ä¾µç‰©ç§å¯¹å†œä¸šçš„å½±å“
æ•°æ®åº“: ç”Ÿç‰©å…¥ä¾µç ”ç©¶, é›†åˆ: ç ”ç©¶æ–‡çŒ®
å…±æ‰¾åˆ° 156 ä¸ªç›¸å…³ç»“æžœï¼Œæ˜¾ç¤ºå‰ 5 ä¸ª:

ç»“æžœ #1:
ç›¸ä¼¼åº¦è¯„åˆ†: 0.8742
ç›¸å…³ç¨‹åº¦: é«˜åº¦ç›¸å…³

å‘é‡æ–‡æ¡£å…ƒæ•°æ®ä¿¡æ¯:
{
  "title": "å¤–æ¥å…¥ä¾µæ¤ç‰©å¯¹å†œä¸šç”Ÿæ€ç³»ç»Ÿçš„å½±å“ç ”ç©¶",
  "author": "å¼ æŸæŸ",
  "year": "2023"
}

åŽŸæ–‡æ¡£åˆ†æ®µå†…å®¹:
å¤–æ¥å…¥ä¾µæ¤ç‰©é€šè¿‡ä¸Žä½œç‰©ç«žäº‰å…»åˆ†ã€æ°´åˆ†å’Œå…‰ç…§èµ„æºï¼Œ
ä¸¥é‡å½±å“å†œä¸šç”Ÿäº§æ•ˆçŽ‡ã€‚ç ”ç©¶è¡¨æ˜Žï¼ŒæŸäº›å…¥ä¾µæ¤ç‰©
å¯ä½¿ä½œç‰©äº§é‡ä¸‹é™20-40%...

AIæ•´åˆåˆ†æžæŠ¥å‘Š:
åŸºäºŽæ£€ç´¢åˆ°çš„156ç¯‡ç›¸å…³æ–‡çŒ®ï¼Œå…¥ä¾µç‰©ç§å¯¹å†œä¸šçš„å½±å“
ä¸»è¦ä½“çŽ°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š1ï¼‰ç›´æŽ¥ç»æµŽæŸå¤±ï¼Œå¹´å‡
é€ æˆå†œä¸šæŸå¤±çº¦500äº¿å…ƒ...
```

## ðŸ“– é¡¹ç›®ç»“æž„

```
mongo-query-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ mongo_query_server.py    # æ ¸å¿ƒMCPæœåŠ¡å™¨å®žçŽ°
â”‚   â””â”€â”€ start_mcp_server.py      # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ mcp.json                     # MCPæœåŠ¡å™¨é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–
â”œâ”€â”€ setup.py                     # å®‰è£…é…ç½®
â”œâ”€â”€ .env.example                 # çŽ¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
```

## ðŸ› æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

**1. æ¨¡åž‹åŠ è½½å¤±è´¥**
```bash
# æ£€æŸ¥OllamaæœåŠ¡çŠ¶æ€
ollama list
# é‡æ–°ä¸‹è½½æ¨¡åž‹
ollama pull dengcao/Qwen3-Embedding-8B:Q5_K_M
```

**2. æ•°æ®åº“è¿žæŽ¥å¤±è´¥**
```bash
# æ£€æŸ¥MongoDBæœåŠ¡
systemctl status mongod
# éªŒè¯è¿žæŽ¥å­—ç¬¦ä¸²
mongo mongodb://localhost:27017/
```

**3. MCPè¿žæŽ¥é—®é¢˜**
- ç¡®ä¿Pythonè·¯å¾„æ­£ç¡®è®¾ç½®
- æ£€æŸ¥çŽ¯å¢ƒå˜é‡é…ç½®
- éªŒè¯ä¾èµ–åŒ…ç‰ˆæœ¬

## ðŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æŽ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»ºPull Request

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ðŸ™ è‡´è°¢

- [Ollama](https://ollama.ai/) - æœ¬åœ°æ¨¡åž‹æŽ¨ç†
- [MongoDB](https://mongodb.com/) - æ•°æ®åº“æ”¯æŒ
- [Model Context Protocol](https://modelcontextprotocol.io/) - MCPåè®®
- [Anthropic](https://anthropic.com/) - MCPæ ‡å‡†åˆ¶å®š

## ðŸ“ž è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub Repository](https://github.com/your-username/mongo-query-mcp)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-username/mongo-query-mcp/issues)
- é‚®ç®±: your.email@example.com

---

**æ ‡ç­¾**: `#MCP` `#MongoDB` `#NLP` `#VectorSearch` `#AI` `#Chinese` `#AcademicResearch`
